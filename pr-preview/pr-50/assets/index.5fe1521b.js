import{b as S,o as c,e as l,f as d,g as _,j as x,k as L,F as y,l as k,m as v,t as O,q as C,v as j,x as I}from"./@vue.dee5c8f0.js";import{c as R,a as $}from"./vendor.2748a6d0.js";import{i as A}from"./echarts.e0d8e42b.js";import"./zrender.6a99619c.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))n(e);new MutationObserver(e=>{for(const r of e)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const r={};return e.integrity&&(r.integrity=e.integrity),e.referrerpolicy&&(r.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?r.credentials="include":e.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(e){if(e.ep)return;e.ep=!0;const r=s(e);fetch(e.href,r)}})();const h=(t,o)=>{const s=t.__vccOpts||t;for(const[n,e]of o)s[n]=e;return s},D={},T={class:"header-bar"},P={class:"header-nav"},V=L("global"),z=L("projects");function N(t,o){const s=S("RouterLink");return c(),l("header",T,[d("nav",P,[_(s,{class:"header-link",to:"/"},{default:x(()=>[V]),_:1}),_(s,{class:"header-link",to:"/projects"},{default:x(()=>[z]),_:1})])])}const q=h(D,[["render",N],["__scopeId","data-v-3f84875e"]]);const B={__name:"App",setup(t){return(o,s)=>{const n=S("RouterView");return c(),l(y,null,[_(q),_(n,{class:"main-box"})],64)}}},H=h(B,[["__scopeId","data-v-f3729390"]]),M="modulepreload",F=function(t,o){return new URL(t,o).href},w={},p=function(o,s,n){return!s||s.length===0?o():Promise.all(s.map(e=>{if(e=F(e,n),e in w)return;w[e]=!0;const r=e.endsWith(".css"),i=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${i}`))return;const a=document.createElement("link");if(a.rel=r?"stylesheet":M,r||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),r)return new Promise((u,f)=>{a.addEventListener("load",u),a.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>o())};function G(t,o){const s=A(t,"roma"),n=o.xAxis,e=o.yAxis,r=o.size.map(function(a){return[a[1],a[0],a[2]]}),i={title:{text:"Trends in the growth of committees",left:40,top:20},tooltip:{position:"top",axisPointer:{type:"cross"},formatter:function(a){if(a.componentSubType=="scatter"){const u=a.data[2],f=n[a.data[0]],E=e[a.data[1]];return`${f} <br/> ${E}: ${u}`}}},grid:{left:40,top:"10%",bottom:"5%",right:"10%",containLabel:!0},xAxis:{type:"category",data:n,boundaryGap:!1,splitLine:{show:!0},axisLine:{show:!1}},yAxis:{type:"category",data:e,minInterval:0,axisLine:{show:!1}},series:[{type:"scatter",symbolSize:function(a){return a[2]},emphasis:{scale:!0},data:r,animationDelay:function(a){return a*5}}]};return s.setOption(i),s}const b=t=>t.length==5?t.slice(0,4)+"0"+t.slice(4)-0:t-0,J=t=>t.slice(0,4)+"-"+t.slice(4),U=t=>{let o=[];var s=new Date;const n=(t+"").slice(0,4),e=s.getFullYear();for(let r=n;r<=e;r++)for(let i=1;i<=12;i++)o.push(r.toString()+i.toString());return o},W=t=>{let o=[];t.forEach(n=>{let e=n.data?Object.keys(n.data):[];o.push(...e)}),o=o.filter((n,e)=>o.indexOf(n)===e),o.sort((n,e)=>b(n)-b(e)),o[0]&&(o=U(o[0]));const s=t.map((n,e)=>({name:n.name,type:"bar",data:o.map(r=>t[e].data&&t[e].data[r]?t[e].data[r]:0)}));return o=o.map(J),{series:s,xAxis:o}},X={bar:W};function Y(t,o,s,n){let{series:e,xAxis:r}=X.bar([{name:"PMC",data:o.pmc}]);const i=K(e[0].data),a=A(t,"roma"),u={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},title:{text:s,subtext:o.description,top:20,left:"center"},grid:{top:100,right:"10%"},legend:{top:60,right:30,data:["new","total"]},toolbox:{top:10,right:20,feature:{myClose:{show:!0,title:"close",icon:"path://M704.28672 309.20704l28.95872 28.9792L334.6432 736.78848l-28.95872-28.9792z M341.03296 315.5968l398.60224 398.60224-28.95872 28.95872-398.60224-398.60224z",onclick:()=>{n()}}}},xAxis:[{type:"category",data:r}],yAxis:[{type:"value",name:"scale",position:"left",alignTicks:!0,axisLine:{show:!0},axisLabel:{formatter:"{value}"}}],series:[{name:"new",type:"bar",data:e[0].data},{name:"total",type:"line",data:i}]};return a.setOption(u),window.onresize=()=>{a.resize()},a}function K(t){console.log(t);let o=[],s=0;return t.forEach(n=>{s=s+n,o.push(s)}),o}const Q={data(){return{myScatter:null,popup:null,data:[],subShow:!1,tagList:[],tagCurrent:""}},created(){this.getData()},watch:{subShow:function(t){t&&setTimeout(()=>{this.popup.resize()},200)}},methods:{getData(){const t=new XMLHttpRequest;t.open("get","@/../json/committee.json"),t.send(null),t.onload=()=>{t.status==200&&(this.data=JSON.parse(t.responseText),this.tagList=Object.keys(this.data.scatter).splice(0,10),this.tagCurrent=this.tagList[0],this.drawScatter())}},drawScatter(){const t=document.getElementById("Scatter");t.removeAttribute("_echarts_instance_");const o=this.data.scatter[this.tagCurrent];this.myScatter=G(t,o),this.myScatter.on("click",s=>{if(s.componentType=="series"){const n=o.yAxis;this.drawLine(n[s.value[1]])}}),window.onresize=()=>{this.myScatter.resize()}},tagSelect(t){this.tagCurrent=t,this.drawScatter()},drawLine(t){this.subShow=!0;const o=this.data.committees[t],s=t,n=document.getElementById("popup");this.popup=Y(n,o,s,()=>{this.subShow=!1})}}},Z=t=>(C("data-v-599a07e5"),t=t(),j(),t),tt=Z(()=>d("div",{id:"Scatter"},null,-1)),et={class:"tag-box"},ot=["onClick"];function st(t,o,s,n,e,r){return c(),l(y,null,[tt,d("ul",et,[(c(!0),l(y,null,k(e.tagList,i=>(c(),l("li",{key:i,class:v(["tag",{"tag-active":i===e.tagCurrent}]),onClick:a=>r.tagSelect(i)},O(i),11,ot))),128))]),d("div",{id:"popup",class:v(e.subShow?"sub-show":"sub-hide")},null,2)],64)}const nt=h(Q,[["render",st],["__scopeId","data-v-599a07e5"]]);const rt={class:"graphic"},at={__name:"GlobalView",setup(t){return(o,s)=>(c(),l("main",null,[d("div",rt,[_(nt)])]))}},it=h(at,[["__scopeId","data-v-37e48590"]]),ct=R({history:$("./"),routes:[{path:"/",name:"global",component:it},{path:"/projects",name:"projects",component:()=>p(()=>import("./ProjectsView.21996142.js"),["ProjectsView.21996142.js","ProjectsView.e3b0c442.css","@vue.dee5c8f0.js","vendor.2748a6d0.js","echarts.e0d8e42b.js","zrender.6a99619c.js"],import.meta.url),children:[{path:"",name:"search",component:()=>p(()=>import("./SearchView.2747a7d4.js"),["SearchView.2747a7d4.js","SearchView.c25d7152.css","@vue.dee5c8f0.js","ProjectCard.89d7327d.js","ProjectCard.d3fb5a10.css","vendor.2748a6d0.js","echarts.e0d8e42b.js","zrender.6a99619c.js"],import.meta.url)},{path:"detail",name:"Detail",component:()=>p(()=>import("./ProjectDetail.0270f4ed.js"),["ProjectDetail.0270f4ed.js","ProjectDetail.33f802e6.css","@vue.dee5c8f0.js","vendor.2748a6d0.js","ProjectCard.89d7327d.js","ProjectCard.d3fb5a10.css","echarts.e0d8e42b.js","zrender.6a99619c.js"],import.meta.url),children:[{path:"project",component:()=>p(()=>import("./SingleProjectTemplate.f8996a80.js"),["SingleProjectTemplate.f8996a80.js","SingleProjectTemplate.482c2208.css","vendor.2748a6d0.js","@vue.dee5c8f0.js","bar.3dcb5bdd.js","bar.ae609f90.css","echarts.e0d8e42b.js","zrender.6a99619c.js"],import.meta.url)},{path:"compare",component:()=>p(()=>import("./MultiProjectTemplates.06e267c3.js"),["MultiProjectTemplates.06e267c3.js","MultiProjectTemplates.bad1400e.css","vendor.2748a6d0.js","@vue.dee5c8f0.js","bar.3dcb5bdd.js","bar.ae609f90.css","echarts.e0d8e42b.js","zrender.6a99619c.js"],import.meta.url)}]}]}]});function g(t,o){const s=new XMLHttpRequest;s.open("get",t),s.send(null),s.onload=()=>{s.status==200&&this.provide(o,JSON.parse(s.responseText))}}const m=I(H);g.apply(m,["@/../json/committee.json","committee"]);g.apply(m,["@/../json/projects_total.json","repo"]);g.apply(m,["@/../Qi/qi.json","qi"]);m.use(ct);m.mount("#app");export{h as _,X as g};
