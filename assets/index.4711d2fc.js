import{b,o as c,e as l,f as d,g as _,j as y,k as S,F as f,l as E,m as x,t as k,q as O,v as C,x as I}from"./_@vue.e8f5048c.js";import{c as R,a as $}from"./__vendor.7ec403f7.js";import{i as L}from"./_echarts.e925a001.js";import"./_zrender.d509ed34.js";(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const n of e)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function s(e){const n={};return e.integrity&&(n.integrity=e.integrity),e.referrerpolicy&&(n.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?n.credentials="include":e.crossorigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(e){if(e.ep)return;e.ep=!0;const n=s(e);fetch(e.href,n)}})();const m=(t,o)=>{const s=t.__vccOpts||t;for(const[r,e]of o)s[r]=e;return s},D={},T={class:"header-bar"},P={class:"header-nav"},V=S("global"),j=S("projects");function z(t,o){const s=b("RouterLink");return c(),l("header",T,[d("nav",P,[_(s,{class:"header-link",to:"/"},{default:y(()=>[V]),_:1}),_(s,{class:"header-link",to:"/projects"},{default:y(()=>[j]),_:1})])])}const N=m(D,[["render",z],["__scopeId","data-v-3f84875e"]]);const B={__name:"App",setup(t){return(o,s)=>{const r=b("RouterView");return c(),l(f,null,[_(N),_(r,{class:"main-box"})],64)}}},q=m(B,[["__scopeId","data-v-f3729390"]]),H="modulepreload",M=function(t,o){return new URL(t,o).href},v={},p=function(o,s,r){return!s||s.length===0?o():Promise.all(s.map(e=>{if(e=M(e,r),e in v)return;v[e]=!0;const n=e.endsWith(".css"),i=n?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${i}`))return;const a=document.createElement("link");if(a.rel=n?"stylesheet":H,n||(a.as="script",a.crossOrigin=""),a.href=e,document.head.appendChild(a),n)return new Promise((u,h)=>{a.addEventListener("load",u),a.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${e}`)))})})).then(()=>o())};function F(t,o){const s=L(t,"roma"),r=o.xAxis,e=o.yAxis,n=o.size.map(function(a){return[a[1],a[0],a[2]]}),i={title:{text:"Trends in the growth of committees",left:40,top:20},tooltip:{position:"top",axisPointer:{type:"cross"},formatter:function(a){if(a.componentSubType=="scatter"){const u=a.data[2],h=r[a.data[0]],A=e[a.data[1]];return`${h} <br/> ${A}: ${u}`}}},grid:{left:40,top:"10%",bottom:"5%",right:"10%",containLabel:!0},xAxis:{type:"category",data:r,boundaryGap:!1,splitLine:{show:!0},axisLine:{show:!1}},yAxis:{type:"category",data:e,minInterval:0,axisLine:{show:!1}},series:[{type:"scatter",symbolSize:function(a){return a[2]},emphasis:{scale:!0},data:n,animationDelay:function(a){return a*5}}]};return s.setOption(i),s}const w=t=>t.length==5?t.slice(0,4)+"0"+t.slice(4)-0:t-0,G=t=>t.slice(0,4)+"-"+t.slice(4),J=t=>{let o=[];var s=new Date;const r=(t+"").slice(0,4),e=s.getFullYear();for(let n=r;n<=e;n++)for(let i=1;i<=12;i++)o.push(n.toString()+i.toString());return o},U=t=>{let o=[];t.forEach(r=>{let e=r.data?Object.keys(r.data):[];o.push(...e)}),o=o.filter((r,e)=>o.indexOf(r)===e),o.sort((r,e)=>w(r)-w(e)),o[0]&&(o=J(o[0]));const s=t.map((r,e)=>({name:r.name,type:"bar",data:o.map(n=>t[e].data&&t[e].data[n]?t[e].data[n]:0)}));return o=o.map(G),{series:s,xAxis:o}},W={bar:U};function X(t,o,s,r){let{series:e,xAxis:n}=W.bar([{name:"PMC",data:o.pmc}]);const i=Y(e[0].data),a=L(t,"roma"),u={tooltip:{trigger:"axis",axisPointer:{type:"cross"}},title:{text:s,subtext:o.description,top:20,left:"center"},grid:{top:100,right:"10%"},legend:{top:60,right:30,data:["new","total"]},toolbox:{top:10,right:20,feature:{myClose:{show:!0,title:"close",icon:"path://M704.28672 309.20704l28.95872 28.9792L334.6432 736.78848l-28.95872-28.9792z M341.03296 315.5968l398.60224 398.60224-28.95872 28.95872-398.60224-398.60224z",onclick:()=>{r()}}}},xAxis:[{type:"category",data:n}],yAxis:[{type:"value",name:"scale",position:"left",alignTicks:!0,axisLine:{show:!0},axisLabel:{formatter:"{value}"}}],series:[{name:"new",type:"bar",data:e[0].data},{name:"total",type:"line",data:i}]};return a.setOption(u),window.onresize=()=>{a.resize()},a}function Y(t){console.log(t);let o=[],s=0;return t.forEach(r=>{s=s+r,o.push(s)}),o}const K={data(){return{myScatter:null,popup:null,data:[],subShow:!1,tagList:[],tagCurrent:""}},created(){this.getData()},watch:{subShow:function(t){t&&setTimeout(()=>{this.popup.resize()},200)}},methods:{getData(){const t=new XMLHttpRequest;t.open("get","@/../json/committee.json"),t.send(null),t.onload=()=>{t.status==200&&(this.data=JSON.parse(t.responseText),this.tagList=Object.keys(this.data.scatter).splice(0,10),this.tagCurrent=this.tagList[0],this.drawScatter())}},drawScatter(){const t=document.getElementById("Scatter");t.removeAttribute("_echarts_instance_");const o=this.data.scatter[this.tagCurrent];this.myScatter=F(t,o),this.myScatter.on("click",s=>{if(s.componentType=="series"){const r=o.yAxis;this.drawLine(r[s.value[1]])}}),window.onresize=()=>{this.myScatter.resize()}},tagSelect(t){this.tagCurrent=t,this.drawScatter()},drawLine(t){this.subShow=!0;const o=this.data.committees[t],s=t,r=document.getElementById("popup");this.popup=X(r,o,s,()=>{this.subShow=!1})}}},Q=t=>(O("data-v-599a07e5"),t=t(),C(),t),Z=Q(()=>d("div",{id:"Scatter"},null,-1)),tt={class:"tag-box"},et=["onClick"];function ot(t,o,s,r,e,n){return c(),l(f,null,[Z,d("ul",tt,[(c(!0),l(f,null,E(e.tagList,i=>(c(),l("li",{key:i,class:x(["tag",{"tag-active":i===e.tagCurrent}]),onClick:a=>n.tagSelect(i)},k(i),11,et))),128))]),d("div",{id:"popup",class:x(e.subShow?"sub-show":"sub-hide")},null,2)],64)}const st=m(K,[["render",ot],["__scopeId","data-v-599a07e5"]]);const rt={class:"graphic"},nt={__name:"GlobalView",setup(t){return(o,s)=>(c(),l("main",null,[d("div",rt,[_(st)])]))}},at=m(nt,[["__scopeId","data-v-37e48590"]]),it=R({history:$("./"),routes:[{path:"/",name:"global",component:at},{path:"/projects",name:"projects",component:()=>p(()=>import("./ProjectsView.5151965c.js"),["ProjectsView.5151965c.js","ProjectsView.e3b0c442.css","_@vue.e8f5048c.js","__vendor.7ec403f7.js","_echarts.e925a001.js","_zrender.d509ed34.js"],import.meta.url),children:[{path:"",name:"search",component:()=>p(()=>import("./SearchView.ad7cdb55.js"),["SearchView.ad7cdb55.js","SearchView.c25d7152.css","_@vue.e8f5048c.js","ProjectCard.139171ec.js","ProjectCard.d3fb5a10.css","__vendor.7ec403f7.js","_echarts.e925a001.js","_zrender.d509ed34.js"],import.meta.url)},{path:"detail",name:"Detail",component:()=>p(()=>import("./ProjectDetail.eba011bd.js"),["ProjectDetail.eba011bd.js","ProjectDetail.33f802e6.css","_@vue.e8f5048c.js","__vendor.7ec403f7.js","ProjectCard.139171ec.js","ProjectCard.d3fb5a10.css","_echarts.e925a001.js","_zrender.d509ed34.js"],import.meta.url),children:[{path:"project",component:()=>p(()=>import("./SingleProjectTemplate.324d967d.js"),["SingleProjectTemplate.324d967d.js","SingleProjectTemplate.482c2208.css","__vendor.7ec403f7.js","_@vue.e8f5048c.js","bar.730a1c13.js","bar.1cb02a26.css","_echarts.e925a001.js","_zrender.d509ed34.js"],import.meta.url)},{path:"compare",component:()=>p(()=>import("./MultiProjectTemplates.17cde268.js"),["MultiProjectTemplates.17cde268.js","MultiProjectTemplates.bad1400e.css","__vendor.7ec403f7.js","_@vue.e8f5048c.js","bar.730a1c13.js","bar.1cb02a26.css","_echarts.e925a001.js","_zrender.d509ed34.js"],import.meta.url)}]}]}]});function ct(t,o){const s=new XMLHttpRequest;s.open("get",t),s.send(null),s.onload=()=>{s.status==200&&this.provide(o,JSON.parse(s.responseText))}}const g=I(q);ct.apply(g,["@/../json/committee.json","committee"]);g.use(it);g.mount("#app");export{m as _,W as g};
